<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Connection Time</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        deepBlue: '#003366',
                        lightBlue: '#3399CC',
                        accentOrange: '#F39C12',
                    },
                    fontFamily: {
                        serif: ['"Crimson Text"', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(to bottom, #f1f5f9, #e2e8f0);
            font-family: 'Inter', sans-serif;
            color: #1a202c;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: '"Crimson Text"', serif;
        }

        .card {
            background: white;
            border-radius: 0.75rem;
            /* 12px */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .input-field {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: #3399CC;
            ring: 1px solid #3399CC;
        }

        textarea.input-field {
            min-height: 100px;
            resize: vertical;
        }

        .attr-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            /* Pill */
            border: 1px solid #cbd5e1;
            background-color: white;
            color: #475569;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0.25rem;
        }

        .attr-btn:hover {
            border-color: #3399CC;
            color: #003366;
        }

        .attr-btn.selected {
            background-color: #F39C12;
            color: white;
            border-color: #F39C12;
            box-shadow: 0 2px 4px rgba(243, 156, 18, 0.3);
        }

        .primary-btn {
            background-color: #003366;
            color: white;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-weight: 600;
            width: 100%;
            text-align: center;
            transition: background-color 0.2s;
        }

        .primary-btn:hover {
            background-color: #002244;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>

<body class="min-h-screen py-8 px-4 sm:px-6 lg:px-8 max-w-2xl mx-auto">

    <!-- Header -->
    <header class="text-center mb-8">
        <div class="flex items-center justify-center gap-3 mb-2">
            <a href="https://ministrybag.com/" target="_blank" rel="noopener noreferrer" aria-label="Ministry Bag home"
                class="inline-flex items-center hover:opacity-80 transition-opacity">
                <img src="ministrybagsatchel1.svg" alt="Ministry Bag logo" class="h-10 w-auto">
            </a>
            <h1 class="text-4xl font-semibold text-deepBlue">Weekly Connection Time</h1>
        </div>
        <img src="weeklyconnectiontimelogo.png" alt="Weekly Connection Time Logo" class="mx-auto mb-4 w-48 h-auto">
        <p class="text-slate-600 italic font-serif text-lg">"Strengthening Marriages with Intentional Conversations"</p>
    </header>

    <!-- Main Form Section -->
    <main id="app-form">

        <!-- Section 0: Regular Connection Time -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Our Regular Connection time will be...</h2>
            <input type="text" id="connectionTime" class="input-field" placeholder="e.g., Sunday at 8pm">
        </section>

        <!-- Section 1: Weekly Affirmation -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-1">An Affirmation</h2>
            <p class="text-sm text-slate-500 mb-4">This week: I saw you... / I was impressed by your... / you really did
                a great job...</p>

            <textarea id="affirmation" class="input-field" placeholder="I really appreciated when you..."></textarea>
        </section>

        <!-- Section 2: Highs & Lows -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Looking Back</h2>

            <div class="mb-4">
                <label class="block mb-1 font-medium text-slate-700">A high from this week was...</label>
                <input type="text" id="highPoint" class="input-field" placeholder="A moment of joy or success...">
            </div>

            <div>
                <label class="block mb-1 font-medium text-slate-700">A low from this week was...</label>
                <input type="text" id="lowPoint" class="input-field" placeholder="A struggle or disappointment...">
            </div>
        </section>

        <!-- Section 3: Dreams & Goals -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Looking Ahead</h2>
            <label class="block mb-1 font-medium text-slate-700">What are we dreaming about or working toward this week
                or year?</label>
            <textarea id="dreams" class="input-field" placeholder="Planning for... / Hoping to..."></textarea>
        </section>

        <!-- Section 4: Loving Sacrifice -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Serving One Another</h2>
            <label class="block mb-1 font-medium text-slate-700">How can I serve you and love you well this
                week?</label>
            <textarea id="service" class="input-field"
                placeholder="I would feel loved if... / I need help with..."></textarea>
        </section>

        <!-- Section 4.2: Date Night -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Date Night</h2>
            <label class="block mb-1 font-medium text-slate-700">When and where is our next Date Night?</label>
            <textarea id="dateNight" class="input-field" placeholder="Let's go to..."></textarea>
        </section>

        <!-- Section 4.25: Custom Question -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Add Your Own Question</h2>
            <div class="mb-4">
                <input type="text" id="customQuestion" class="input-field mb-2 font-semibold"
                    placeholder="Type your custom question here...">
                <textarea id="customAnswer" class="input-field" placeholder="Your answer..."></textarea>
            </div>
        </section>

        <!-- Section 4.5: Prayer Requests -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-4">Prayer Requests</h2>
            <label class="block mb-1 font-medium text-slate-700">How can I pray for you this week?</label>
            <textarea id="prayer" class="input-field" placeholder="Please pray for..."></textarea>
        </section>

        <!-- Section 5: My Growth Area -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-1">My Personal Growth Areas</h2>
            <p class="text-sm text-slate-500 mb-4">Having a healthy marriage is a priority for me. I want to work on
                these things for the good of our family and the glory of God.</p>

            <textarea id="growth" class="input-field" placeholder="I am working on..."></textarea>
        </section>

        <!-- Section 6: Marriage Bible Verse -->
        <section class="card">
            <h2 class="text-2xl font-semibold text-deepBlue mb-1">Our Marriage Bible Verse</h2>
            <textarea id="bibleVerse" class="input-field" placeholder="Paste your verse here..."></textarea>
        </section>

        <!-- Finish Button -->
        <div class="mt-8 mb-12">
            <button onclick="showSummary()" class="primary-btn shadow-lg">
                Create Summary
            </button>
        </div>
    </main>

    <!-- Summary Section (Hidden by default) -->
    <div id="summary-view" class="hidden">
        <div class="card bg-white border-t-4 border-accentOrange">
            <h2 class="text-3xl text-center text-deepBlue mb-6">Connection Summary</h2>

            <div class="space-y-6">
                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Regular Connection
                        Time</h3>
                    <p id="summary-connectionTime" class="text-slate-700 font-medium text-deepBlue border-b pb-2 mb-2">
                    </p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Affirmation</h3>
                    <p id="summary-affirmation"
                        class="text-slate-700 italic border-l-4 border-lightBlue pl-3 py-1 bg-slate-50"></p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">High Point
                        </h3>
                        <p id="summary-high" class="text-slate-700"></p>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Low Point</h3>
                        <p id="summary-low" class="text-slate-700"></p>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Dreams & Goals
                    </h3>
                    <p id="summary-dreams" class="text-slate-700"></p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">How to Serve</h3>
                    <p id="summary-service" class="text-slate-700"></p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Next Date Night
                    </h3>
                    <p id="summary-dateNight" class="text-slate-700"></p>
                </div>

                <div id="summary-custom-container" class="hidden">
                    <h3 id="summary-custom-question"
                        class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Custom Question
                    </h3>
                    <p id="summary-custom-answer" class="text-slate-700"></p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Prayer Requests
                    </h3>
                    <p id="summary-prayer" class="text-slate-700"></p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Current Focus
                        <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Current Focus
                            Areas</h3>
                        <p id="summary-growth" class="text-slate-700"></p>
                </div>

                <div>
                    <h3 class="text-lg font-bold text-slate-800 uppercase tracking-wide text-xs mb-1">Our Marriage Bible
                        Verse</h3>
                    <p id="summary-bibleVerse"
                        class="text-slate-700 font-serif italic border-l-4 border-accentOrange pl-4 py-2 bg-slate-50">
                    </p>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-slate-100 text-center">
                <button onclick="emailSummary()" class="primary-btn shadow-lg mb-4">
                    Email Summary
                </button>
                <br>
                <button onclick="editForm()" class="text-slate-400 hover:text-deepBlue text-sm underline pb-4">
                    Back to Edit
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // State keys
        const STORAGE_KEY_PREFIX = 'connection_time_';

        // Load data on start
        window.addEventListener('DOMContentLoaded', () => {
            loadFormInputs();
        });

        function loadFormInputs() {
            const inputs = ['connectionTime', 'affirmation', 'highPoint', 'lowPoint', 'dreams', 'service', 'dateNight', 'prayer', 'growth', 'bibleVerse', 'customQuestion', 'customAnswer'];
            inputs.forEach(id => {
                const savedValue = localStorage.getItem(STORAGE_KEY_PREFIX + id);
                if (savedValue) {
                    document.getElementById(id).value = savedValue;
                }
                // Add listener to save on change
                document.getElementById(id).addEventListener('input', (e) => {
                    localStorage.setItem(STORAGE_KEY_PREFIX + id, e.target.value);
                });
            });
        }

        function showSummary() {
            // Populate Summary Fields
            document.getElementById('summary-connectionTime').innerText = document.getElementById('connectionTime').value || "Not set";
            document.getElementById('summary-affirmation').innerText = document.getElementById('affirmation').value || "None shared";
            document.getElementById('summary-high').innerText = document.getElementById('highPoint').value || "-";
            document.getElementById('summary-low').innerText = document.getElementById('lowPoint').value || "-";
            document.getElementById('summary-dreams').innerText = document.getElementById('dreams').value || "No notes";
            document.getElementById('summary-service').innerText = document.getElementById('service').value || "No notes";
            document.getElementById('summary-dateNight').innerText = document.getElementById('dateNight').value || "Not planned yet";
            document.getElementById('summary-prayer').innerText = document.getElementById('prayer').value || "No requests";
            document.getElementById('summary-prayer').innerText = document.getElementById('prayer').value || "No requests";
            document.getElementById('summary-growth').innerText = document.getElementById('growth').value || "No specific focus.";
            document.getElementById('summary-bibleVerse').innerText = document.getElementById('bibleVerse').value || "None set";

            // Custom Question Logic
            const customQ = document.getElementById('customQuestion').value;
            const customA = document.getElementById('customAnswer').value;
            if (customQ) {
                document.getElementById('summary-custom-container').classList.remove('hidden');
                document.getElementById('summary-custom-question').innerText = customQ;
                document.getElementById('summary-custom-answer').innerText = customA || "No answer provided";
            } else {
                document.getElementById('summary-custom-container').classList.add('hidden');
            }

            // Toggle Visibility
            document.getElementById('app-form').classList.add('hidden');
            document.getElementById('summary-view').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function editForm() {
            document.getElementById('summary-view').classList.add('hidden');
            document.getElementById('app-form').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function emailSummary() {
            const date = new Date().toLocaleDateString();
            const subject = `Weekly Connection Summary - ${date}`;

            const connectionTime = document.getElementById('connectionTime').value || "Not set";
            const affirmation = document.getElementById('affirmation').value || "None shared";
            const highPoint = document.getElementById('highPoint').value || "-";
            const lowPoint = document.getElementById('lowPoint').value || "-";
            const dreams = document.getElementById('dreams').value || "No notes";
            const service = document.getElementById('service').value || "No notes";
            const dateNight = document.getElementById('dateNight').value || "Not planned yet";
            const prayer = document.getElementById('prayer').value || "No requests";
            const growth = document.getElementById('growth').value || "No specific focus.";
            const bibleVerse = document.getElementById('bibleVerse').value || "None set";

            const bodyContent = `Weekly Connection Time - ${date}

-- REGULAR TIME --
${connectionTime}

-- AN AFFIRMATION --
${affirmation}

-- LOOKING BACK --
High: ${highPoint}
Low: ${lowPoint}

-- LOOKING AHEAD --
Dreams & Goals:
${dreams}

-- SERVING ONE ANOTHER --
How to Serve:
${service}

-- DATE NIGHT --
${dateNight}

${document.getElementById('customQuestion').value ? `-- CUSTOM: ${document.getElementById('customQuestion').value.toUpperCase()} --\n${document.getElementById('customAnswer').value || "No answer"}\n` : ''}
-- PRAYER REQUESTS --
${prayer}

-- MY PERSONAL GROWTH AREAS --
${growth}

-- OUR MARRIAGE BIBLE VERSE --
${bibleVerse}
`;

            const body = encodeURIComponent(bodyContent);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }
    </script>
</body>

</html>